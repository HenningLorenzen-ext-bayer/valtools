---
title: {{title}}
author: {{author}}
date: "`r Sys.Date()`"
output:
  pdf_document:
    toc: true
vignette: >
  %\VignetteIndexEntry{ {{title}} }
  \usepackage[utf8]{inputenc}
  %\VignetteEngine{knitr::rmarkdown_notangle}
header-includes:
  - \usepackage[dvipsnames, table]{xcolor}
  - \usepackage{float}
  - \usepackage{array}
---

```{r, setup, echo=FALSE}
suppressPackageStartupMessages({
  library(valtools)
  library(knitr)
  library(kableExtra)
  library(magrittr)
  library(devtools)
  library({{pkg_name}})
})

opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  eval = TRUE,
  echo = FALSE,
  results = "asis",
  message = FALSE,
  tidy = FALSE
)

```

```{r shared-obj}
## TODO: verify that this is appropriate for validate outside of package model
##       needs test case
config_file_path <- list.files(pattern = "validation.yml", 
                              package_file(), full.names = TRUE)
all_sig <- vt_scrape_sig_table(pkg = dirname(config_file_path) ) 
```
\newpage

# Certifications

## Signatures

**AUTHOR** My signature designates authorship of this document.

```{r validation-lead-sig-block}
all_sig[tolower(all_sig$role) == "validation lead",] %>%
  vt_kable_sig_table(format = "latex")
```

**APPROVAL** I have reviewed this document and approve its content.

```{r other-roles-sig-block}
all_sig[tolower(all_sig$role) != "validation lead",] %>%
  vt_kable_sig_table(format = "latex")
```

The effective date of this document is the last date of signature.

\newpage

# Release details

## Package Information

### News

```{r news-tab}
vt_scrape_news(pkg = "{{pkg_name}}") %>% 
  vt_kable_news()
```

### Validation Environment

```{r env-tab}
vt_scrape_val_env() %>% 
  vt_kable_val_env()
```

### Function Code

```{r func-authors}
all_authors <- do.call("rbind", vt_scrape_tags_from(
    type = "functions",
    tags = c("editor", "editDate", "export"),
    src = {{pkg_name}},
    ref = valtools:::get_config_working_dir()
  ))
  
all_authors[!is.na(all_authors$export), !names(all_authors) %in% "export"] %>% 
  kable()
```
